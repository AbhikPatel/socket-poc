<!-- Start: Message Container  -->
<div class="d-flex flex-column h-100 overflow-hidden">

    <!-- Header  -->
    <div id="header" class="bg-header d-flex align-items-center px-3">
        <div class="d-flex align-items-center me-2" role="button">
            <span class="back-btn text-chat">
                <i class='bx bx-left-arrow-alt fs-1 me-1'></i>
            </span>
            <img src="../../../assets/images/avatar.png" class="profile-img rounded-circle" alt="profile">
        </div>
        <h5 class="m-0">{{name}}</h5>
    </div>

    <!-- Chat Screen  -->
    <div class="chat-container flex-grow-1 p-4 overflow-auto position-relative" #goToBottom>
        <div class="d-flex" *ngFor="let data of chats" [ngClass]="{ 'justify-content-end' : data.sender === sender}">
            <div class="d-flex chat shadow-sm rounded-3 position-relative my-2"
                [ngClass]="data.sender === sender ? 'bg-white' : 'bg-chat'">
                <span> {{data.content.text}} </span>
                <div class=" chat-info position-absolute fs-7 text-muted"> {{showTime(data.time)}}
                    <ng-container *ngIf="data.sender === sender">
                        <span class="fw-bolder" [ngClass]="data.is_read ? 'text-read' : 'text-muted' ">âœ“</span>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="position-absolute pb-2 transition" [ngClass]="showTyping ? 'opacity-50' : 'opacity-0'" style="margin-top: auto;">
            <img src="../../../assets/images/47-chat-outline.gif" class="text-chat" style="width: 30px;" alt="typer">
        </div>
    </div>

    <!-- Message sender input  -->
    <div id="header" class="d-flex flex-column bg-header p-2">
        <form class="w-100 px-3 d-flex align-items-center" [formGroup]="chatGroup" (ngSubmit)="onSubmit()">
            <input type="text" name="message" id="message" placeholder="Type message" class="form-control"
                formControlName="message">
            <button class="fs-3 ms-3 text-chat border-0" type="submit"><i class='bx bxs-send'></i></button>
        </form>
    </div>
</div>
<!-- End: Message Container  -->